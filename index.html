<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Grapnel by bytecipher</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Grapnel</h1>
        <p>The smallest (1100 bytes gzipped!) Client/Server-Side JavaScript Router with Named Parameters, HTML5 </p>

        <p class="view"><a href="https://github.com/bytecipher/grapnel">View the Project on GitHub <small>bytecipher/grapnel</small></a></p>


        <ul>
          <li><a href="https://github.com/bytecipher/grapnel/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/bytecipher/grapnel/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/bytecipher/grapnel">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="grapnel" class="anchor" href="#grapnel" aria-hidden="true"><span class="octicon octicon-link"></span></a>Grapnel</h1>

<h4>
<a id="the-smallest-1100-bytes-gzipped-clientserver-side-javascript-router-with-named-parameters-html5-pushstate-and-middleware-support" class="anchor" href="#the-smallest-1100-bytes-gzipped-clientserver-side-javascript-router-with-named-parameters-html5-pushstate-and-middleware-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>The smallest (1100 bytes gzipped!) Client/Server-Side JavaScript Router with Named Parameters, HTML5 pushState, and Middleware support.</h4>

<h2>
<a id="downloadinstallation" class="anchor" href="#downloadinstallation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download/Installation</h2>

<p><strong>Download Source:</strong></p>

<ul>
<li><a href="https://raw.githubusercontent.com/bytecipher/grapnel/master/dist/grapnel.min.js">Production</a></li>
<li><a href="https://raw.githubusercontent.com/bytecipher/grapnel/master/src/grapnel.js">Development</a></li>
</ul>

<p><strong>Install with npm</strong></p>

<div class="highlight highlight-bash"><pre>npm install grapnel</pre></div>

<p><strong>Or by using bower:</strong></p>

<div class="highlight highlight-bash"><pre>bower install grapnel</pre></div>

<p><strong>Server only:</strong> (with HTTP methods added, <a href="https://github.com/bytecipher/grapnel/tree/server-router">more info</a>)</p>

<div class="highlight highlight-bash"><pre>npm install grapnel-server</pre></div>

<h1>
<a id="grapnel-features" class="anchor" href="#grapnel-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Grapnel Features</h1>

<ul>
<li>Supports routing using <code>pushState</code> or <code>hashchange</code> concurrently</li>
<li>Supports Named Parameters similar to Sinatra, Restify, and Express</li>
<li>Middleware Support</li>
<li>Works on the client or server-side</li>
<li>RegExp Support</li>
<li>RequreJS/AMD, Browserify, and CommonJS Compatibility</li>
<li>Supports <code>#</code> or <code>#!</code> for <code>hashchange</code> routing</li>
<li>Unobtrusive, supports multiple routers on the same page</li>
<li>No dependencies</li>
</ul>

<h2>
<a id="basic-router" class="anchor" href="#basic-router" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic Router</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>();

router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>products/:category/:id?<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
    <span class="pl-k">var</span> id <span class="pl-k">=</span> req.<span class="pl-c1">params</span>.<span class="pl-c1">id</span>,
        category <span class="pl-k">=</span> req.<span class="pl-c1">params</span>.<span class="pl-c1">category</span>;
    <span class="pl-c">// GET http://mysite.com/#products/widgets/134</span>
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(category, id);
    <span class="pl-c">// =&gt; widgets 134</span>
});</pre></div>

<h2>
<a id="using-pushstate" class="anchor" href="#using-pushstate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using pushState</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>({ pushState <span class="pl-k">:</span> <span class="pl-c1">true</span> });

router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/products/:category/:id?<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
    <span class="pl-k">var</span> id <span class="pl-k">=</span> req.<span class="pl-c1">params</span>.<span class="pl-c1">id</span>,
        category <span class="pl-k">=</span> req.<span class="pl-c1">params</span>.<span class="pl-c1">category</span>

    <span class="pl-en">console</span><span class="pl-c1">.log</span>(category, id);
});

router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/products/widgets/134<span class="pl-pds">'</span></span>);
<span class="pl-c">// =&gt; widgets 134</span></pre></div>

<h2>
<a id="named-parameters" class="anchor" href="#named-parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Named Parameters</h2>

<p>Grapnel supports regex style routes similar to Sinatra, Restify, and Express. The properties are mapped to the parameters in the request.</p>

<div class="highlight highlight-javascript"><pre>router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>products/:id?<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
    <span class="pl-c">// GET /file.html#products/134</span>
    req.<span class="pl-c1">params</span>.<span class="pl-c1">id</span>
    <span class="pl-c">// =&gt; 134</span>
});

router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>products/*<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
    <span class="pl-c">// The wildcard/asterisk will match anything after that point in the URL</span>
    <span class="pl-c">// Parameters are provided req.params using req.params[n], where n is the nth capture</span>
});</pre></div>

<h2>
<a id="middleware-support" class="anchor" href="#middleware-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Middleware Support</h2>

<p>Grapnel also supports middleware:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> <span class="pl-en">auth</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>, <span class="pl-smi">next</span>){
    user.<span class="pl-c1">auth</span>(<span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        req.<span class="pl-c1">user</span> <span class="pl-k">=</span> <span class="pl-v">this</span>;
        <span class="pl-c1">next</span>();
    });
}

router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/*<span class="pl-pds">'</span></span>, auth, <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(req.<span class="pl-c1">user</span>);
});</pre></div>

<h2>
<a id="route-context" class="anchor" href="#route-context" aria-hidden="true"><span class="octicon octicon-link"></span></a>Route Context</h2>

<p>You can add context to a route and even use it with middleware:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> usersRoute <span class="pl-k">=</span> router.<span class="pl-c1">context</span>(<span class="pl-s"><span class="pl-pds">'</span>/user/:id<span class="pl-pds">'</span></span>, getUser, getFollowers); <span class="pl-c">// Middleware can be used here</span>

<span class="pl-c1">usersRoute</span>(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>){
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>Profile<span class="pl-pds">'</span></span>, req.<span class="pl-c1">params</span>.<span class="pl-c1">id</span>);
});

<span class="pl-c1">usersRoute</span>(<span class="pl-s"><span class="pl-pds">'</span>/followers<span class="pl-pds">'</span></span>, otherMiddleware, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>){ <span class="pl-c">// Middleware can be used here too</span>
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>Followers<span class="pl-pds">'</span></span>, req.<span class="pl-c1">params</span>.<span class="pl-c1">id</span>);
});

router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/user/13589<span class="pl-pds">'</span></span>);
<span class="pl-c">// =&gt; Profile 13589</span>

router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/user/13589/followers<span class="pl-pds">'</span></span>);
<span class="pl-c">// =&gt; Followers 13589</span></pre></div>

<h2>
<a id="works-as-a-server-side-router" class="anchor" href="#works-as-a-server-side-router" aria-hidden="true"><span class="octicon octicon-link"></span></a>Works as a server-side router</h2>

<p><strong>This is now simplified as a separate package</strong> (<a href="https://github.com/bytecipher/bytecipher/tree/server-router">more info</a>)</p>

<div class="highlight highlight-bash"><pre>npm install grapnel-server</pre></div>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> http <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>http<span class="pl-pds">'</span></span>),
    app <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>grapnel-server<span class="pl-pds">'</span></span>);

app.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">res</span>, <span class="pl-smi">next</span>){
    res.<span class="pl-c1">end</span>(<span class="pl-s"><span class="pl-pds">'</span>Hello World!<span class="pl-pds">'</span></span>, <span class="pl-c1">200</span>);
});

http.<span class="pl-c1">createServer</span>(app.<span class="pl-c1">start</span>()).<span class="pl-c1">listen</span>(<span class="pl-c1">3000</span>);</pre></div>

<h2>
<a id="declaring-multiple-routes" class="anchor" href="#declaring-multiple-routes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Declaring Multiple Routes</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> routes <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">products</span><span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
        <span class="pl-c">// GET /file.html#products</span>
    },
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">products/:category/:id?</span><span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
        <span class="pl-c">// GET /file.html#products/widgets/35</span>
        req.<span class="pl-c1">params</span>.<span class="pl-c1">category</span>
        <span class="pl-c">// =&gt; widgets</span>
    }
}

Grapnel.<span class="pl-c1">listen</span>(routes);</pre></div>

<h2>
<a id="event-handling" class="anchor" href="#event-handling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Event Handling</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>({ pushState <span class="pl-k">:</span> <span class="pl-c1">true</span>, root <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span> });

router.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">'</span>navigate<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">event</span>){
    <span class="pl-c">// GET /foo/bar</span>
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>URL changed to %s<span class="pl-pds">'</span></span>, <span class="pl-v">this</span>.<span class="pl-c1">path</span>());
    <span class="pl-c">// =&gt; URL changed to /foo/bar</span>
});</pre></div>

<h2>
<a id="regexp-support" class="anchor" href="#regexp-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>RegExp Support</h2>

<p>Grapnel allows RegEx when defining a route:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> expression <span class="pl-k">=</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-k">^</span>food<span class="pl-cce">\/</span>tacos<span class="pl-cce">\/</span>(<span class="pl-c1">.</span><span class="pl-k">*</span>)<span class="pl-k">$</span><span class="pl-pds">/</span>i</span>;
<span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>();

router.<span class="pl-c1">get</span>(expression, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>){
    <span class="pl-c">// GET http://mysite.com/page#food/tacos/good</span>
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>I think tacos are %s.<span class="pl-pds">'</span></span>, req.<span class="pl-c1">params</span>[<span class="pl-c1">0</span>]);
    <span class="pl-c">// =&gt; "He thinks tacos are good."</span>
});</pre></div>

<h2>
<a id="requirejsamd-browserify-and-commonjs-compatibility" class="anchor" href="#requirejsamd-browserify-and-commonjs-compatibility" aria-hidden="true"><span class="octicon octicon-link"></span></a>RequireJS/AMD, Browserify, and CommonJS Compatibility</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-c1">require</span>([<span class="pl-s"><span class="pl-pds">'</span>lib/grapnel<span class="pl-pds">'</span></span>], <span class="pl-k">function</span>(<span class="pl-smi">Grapnel</span>){

    <span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>({ pushState <span class="pl-k">:</span> <span class="pl-c1">true</span> });

    router.<span class="pl-c1">bind</span>(<span class="pl-s"><span class="pl-pds">'</span>navigate<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(){
        <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>It works!<span class="pl-pds">'</span></span>);
    });

    router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>);

});</pre></div>

<p> </p>

<hr>

<h1>
<a id="usage--tips" class="anchor" href="#usage--tips" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage &amp; Tips</h1>

<h2>
<a id="basic-configuration" class="anchor" href="#basic-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic Configuration</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>();</pre></div>

<p>Or you can declare your routes with a literal object:</p>

<div class="highlight highlight-javascript"><pre>Grapnel.<span class="pl-c1">listen</span>({
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">products/:id</span><span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
        <span class="pl-c">// Handler</span>
    }
});</pre></div>

<p>When declaring routes with a literal object, router options can be passed as the first parameter:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> opts <span class="pl-k">=</span> { pushState <span class="pl-k">:</span> <span class="pl-c1">true</span> };

Grapnel.<span class="pl-c1">listen</span>(opts, routes);</pre></div>

<h2>
<a id="enabling-pushstate" class="anchor" href="#enabling-pushstate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling PushState</h2>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>({ pushState <span class="pl-k">:</span> <span class="pl-c1">true</span> });</pre></div>

<p>You can also specify a root URL by setting it as an option:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> router <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Grapnel</span>({ root <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/public/search/<span class="pl-pds">'</span></span>, pushState <span class="pl-k">:</span> <span class="pl-c1">true</span> });</pre></div>

<p>The root may require a beginning slash and a trailing slash depending on how your application utilizes the router.</p>

<h2>
<a id="middleware" class="anchor" href="#middleware" aria-hidden="true"><span class="octicon octicon-link"></span></a>Middleware</h2>

<p>Grapnel uses middleware similar to how Express uses middleware. Middleware has access to the <code>req</code> object, <code>event</code> object, and the next middleware in the call stack (commonly denoted as <code>next</code>). Middleware must call <code>next()</code> to pass control to the next middleware, otherwise the router will stop.</p>

<p>For more information about how middleware works, see <a href="http://expressjs.com/guide/using-middleware.html">Using Middleware</a>.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> <span class="pl-en">user</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>, <span class="pl-smi">next</span>){
    user.<span class="pl-c1">get</span>(<span class="pl-k">function</span>(<span class="pl-smi">err</span>){
        req.<span class="pl-c1">user</span> <span class="pl-k">=</span> <span class="pl-v">this</span>;
        <span class="pl-c1">next</span>();
    });
}

router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/user/*<span class="pl-pds">'</span></span>, user, <span class="pl-k">function</span>(<span class="pl-smi">req</span>){
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(req.<span class="pl-c1">user</span>);
});</pre></div>

<h2>
<a id="navigation" class="anchor" href="#navigation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Navigation</h2>

<p>If pushState is enabled, you can navigate through your application with <code>router.navigate</code>:</p>

<div class="highlight highlight-javascript"><pre>router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/products/123<span class="pl-pds">'</span></span>);</pre></div>

<h2>
<a id="stopping-a-route-event" class="anchor" href="#stopping-a-route-event" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stopping a Route Event</h2>

<div class="highlight highlight-javascript"><pre>router.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">'</span>match<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">event</span>){
    <span class="pl-c1">event</span>.<span class="pl-c1">preventDefault</span>(); <span class="pl-c">// Stops event handler</span>
});</pre></div>

<h2>
<a id="stopping-event-propagation" class="anchor" href="#stopping-event-propagation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stopping Event Propagation</h2>

<div class="highlight highlight-javascript"><pre>router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/products/:id<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>){
    <span class="pl-c1">event</span>.<span class="pl-c1">stopPropagation</span>(); <span class="pl-c">// Stops propagation of the event</span>
});

router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/products/widgets<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>){
    <span class="pl-c">// This will not be executed</span>
});

router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/products/widgets<span class="pl-pds">'</span></span>);</pre></div>

<h2>
<a id="404-pages" class="anchor" href="#404-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>404 Pages</h2>

<p>You can specify a route that only uses a wildcard <code>*</code> as your final route, then use <code>event.parent()</code> which returns <code>false</code> if the call stack doesn't have any other routes to run.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> routes <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">/</span><span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">e</span>){
        <span class="pl-c">// Handle route</span>
    },
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">/store/products/:id</span><span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">e</span>){
        <span class="pl-c">// Handle route</span>
    },
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">/category/:id</span><span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">e</span>){
        <span class="pl-c">// Handle route</span>
    },
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">/*</span><span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">e</span>){
        <span class="pl-k">if</span>(<span class="pl-k">!</span>e.<span class="pl-c1">parent</span>()){
            <span class="pl-c">// Handle 404</span>
        }
    }
}

Grapnel.<span class="pl-c1">listen</span>({ pushState <span class="pl-k">:</span> <span class="pl-c1">true</span> }, routes);</pre></div>

<p> </p>

<hr>

<h1>
<a id="api-documentation" class="anchor" href="#api-documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>API Documentation</h1>

<h5>
<a id="get-adds-a-listeners-and-middleware-for-routes" class="anchor" href="#get-adds-a-listeners-and-middleware-for-routes" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>get</code> Adds a listeners and middleware for routes</h5>

<div class="highlight highlight-javascript"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {String|RegExp} path</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {Function} [[middleware], callback]</span>
<span class="pl-c">*/</span>
router.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/store/:category/:id?<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>){
    <span class="pl-k">var</span> category <span class="pl-k">=</span> req.<span class="pl-c1">params</span>.<span class="pl-c1">category</span>,
        id <span class="pl-k">=</span> req.<span class="pl-c1">params</span>.<span class="pl-c1">id</span>;

    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>Product #%s in %s<span class="pl-pds">'</span></span>, id, category);
});</pre></div>

<h5>
<a id="navigate-navigate-through-application" class="anchor" href="#navigate-navigate-through-application" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>navigate</code> Navigate through application</h5>

<div class="highlight highlight-javascript"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {String} path relative to root</span>
<span class="pl-c">*/</span>
router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/products/123<span class="pl-pds">'</span></span>);</pre></div>

<h5>
<a id="on-adds-a-new-event-listener" class="anchor" href="#on-adds-a-new-event-listener" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>on</code> Adds a new event listener</h5>

<div class="highlight highlight-javascript"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {String} event name (multiple events can be called when separated by a space " ")</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {Function} callback</span>
<span class="pl-c">*/</span>
router.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">'</span>myevent<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">event</span>){
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>Grapnel works!<span class="pl-pds">'</span></span>);
});</pre></div>

<h5>
<a id="once-a-version-of-on-except-its-handler-will-only-be-called-once" class="anchor" href="#once-a-version-of-on-except-its-handler-will-only-be-called-once" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>once</code> A version of <code>on</code> except its handler will only be called once</h5>

<div class="highlight highlight-javascript"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {String} event name (multiple events can be called when separated by a space " ")</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {Function} callback</span>
<span class="pl-c">*/</span>
router.<span class="pl-c1">once</span>(<span class="pl-s"><span class="pl-pds">'</span>init<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(){
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>This will only be executed once<span class="pl-pds">'</span></span>);
});</pre></div>

<h5>
<a id="trigger-triggers-an-event" class="anchor" href="#trigger-triggers-an-event" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>trigger</code> Triggers an event</h5>

<div class="highlight highlight-javascript"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {String} event name</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {Mixed} [attributes] Parameters that will be applied to event handler</span>
<span class="pl-c">*/</span>
router.<span class="pl-c1">trigger</span>(<span class="pl-s"><span class="pl-pds">'</span>event<span class="pl-pds">'</span></span>, eventArg1, eventArg2, etc);</pre></div>

<h5>
<a id="context-returns-a-function-that-can-be-called-with-a-specific-route-in-context" class="anchor" href="#context-returns-a-function-that-can-be-called-with-a-specific-route-in-context" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>context</code> Returns a function that can be called with a specific route in context.</h5>

<p>Both the <code>router.context</code> method and the function it returns can accept middleware. <strong>Note: when calling <code>route.context</code>, you should omit the trailing slash.</strong></p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">/**</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {String} Route context (without trailing slash)</span>
<span class="pl-c"> * <span class="pl-k">@param</span> {[Function]} Middleware (optional)</span>
<span class="pl-c"> * <span class="pl-k">@return</span> {Function} Adds route to context</span>
<span class="pl-c">*/</span>
<span class="pl-k">var</span> usersRoute <span class="pl-k">=</span> router.<span class="pl-c1">context</span>(<span class="pl-s"><span class="pl-pds">'</span>/user/:id<span class="pl-pds">'</span></span>);

<span class="pl-c1">usersRoute</span>(<span class="pl-s"><span class="pl-pds">'</span>/followers<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">event</span>){
    <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-s"><span class="pl-pds">'</span>Followers<span class="pl-pds">'</span></span>, req.<span class="pl-c1">params</span>.<span class="pl-c1">id</span>);
});

router.<span class="pl-c1">navigate</span>(<span class="pl-s"><span class="pl-pds">'</span>/user/13589/followers<span class="pl-pds">'</span></span>);
<span class="pl-c">// =&gt; Followers 13589</span></pre></div>

<h5>
<a id="path" class="anchor" href="#path" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>path</code>
</h5>

<ul>
<li>
<code>router.path('string')</code> Sets a new path or hash</li>
<li>
<code>router.path()</code> Gets path or hash</li>
<li>
<code>router.path(false)</code> Clears the path or hash</li>
</ul>

<h5>
<a id="bind-an-alias-of-on" class="anchor" href="#bind-an-alias-of-on" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>bind</code> An alias of <code>on</code>
</h5>

<h5>
<a id="add-an-alias-of-get" class="anchor" href="#add-an-alias-of-get" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>add</code> An alias of <code>get</code>
</h5>

<h5>
<a id="fragment-deprecated" class="anchor" href="#fragment-deprecated" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>fragment</code> (Deprecated)</h5>

<h2>
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h2>

<ul>
<li>
<code>pushState</code> Enable pushState, allowing manipulation of browser history instead of using the <code>#</code> and <code>hashchange</code> event</li>
<li>
<code>root</code> Root of your app, all navigation will be relative to this</li>
<li>
<code>hashBang</code> Enable <code>#!</code> as the anchor of a <code>hashchange</code> router instead of using just a <code>#</code>
</li>
</ul>

<h2>
<a id="events" class="anchor" href="#events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Events</h2>

<ul>
<li>
<code>navigate</code> Fires when router navigates through history</li>
<li>
<code>match</code> Fires when a new match is found, but before the handler is called</li>
<li>
<code>hashchange</code> Fires when hashtag is changed</li>
</ul>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<h5>
<a id="mit-license" class="anchor" href="#mit-license" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="http://opensource.org/licenses/MIT">MIT License</a>
</h5>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/bytecipher">bytecipher</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
